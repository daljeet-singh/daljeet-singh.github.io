<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8'>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
        <link href='stylesheets/googlefont.css' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" type="text/css" href="semantic/packaged/css/semantic.css">
        <link rel="stylesheet" type="text/css" href="semantic/packaged/css/custom.css">
        <script src="javascripts/j2.js"></script>
        <script src="semantic/packaged/javascript/semantic.js"></script>
        <script src="semantic/packaged/javascript/custom.js"></script>

        <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
        <title>Daljeet Singh</title>
    </head>
    <body id="example" class="feed">
        <div class="ui top attached progress">
            <div class="bar"></div>
        </div>
        <div class="ui blue segment">
            <div class="container">
                <div class="introduction">
                    <h1 class="ui dividing header">   
                        PHP
                    </h1>
                    <p>Collection of some usefull PHP Programms</p>
                </div>
                <div class="advertisement">
                    <div id="carbonads-container">
                        <div class="carbonad">
                            <a class="ui orange button" href="http://www.github.com/daljeet-singh">@daljeet-singh</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="main container">
            
            <h2 class="ui dividing header">Why Webhooks are awesome</h2>
            <div class="example">
                <div class="ui grid">
                    <div class="ten wide column">
                        <div class="ui small piled feed segment">
                            <h4 class="ui header">Code</h4>
                            <div class="ui inverted segment">
                                <p>
                                    Webhooks are what dreams are made of! That may sound a little over the top, but as developers we can get on board with that statement 100%.  They can make software come together (literally), ease your polling frustrations, and just simply make your developer life a little easier.
                                </p>
                                <p>
                                    If you're not familiar with the concept, webhooks are simply a pattern for an evented web.  Basically the idea is that an application will send you an HTTP request with relevant data about a trigger that you wanted to be notified about, an HTTP reminder of sorts. With the relevant data now in your hands, you can do anything you like with it.  Run some code, send out an email, .... anything you're coding heart desires.  It sounds simple, but here are a few reasons why that makes webhooks awesome.
                                </p>
                                <p>
                                    <ol>
                                        <li>
                                            No Pooling
                                        </li>
                                        <p>
                                            Webhooks can blast polling to smithereens. Because webhooks are designed to post data to endpoints, polling becomes uneccessary and obsolete. And that is Awesome! If you think about it, would you keep asking your alarm clock to notify you if it's time to get up in the morning? Heck no! So why should it be any different with the web?
                                        </p>
                                        <li>
                                            Faster delivery
                                        </li>
                                        <p>
                                            An added bonus of not using polling is that in most cases you will receive the data from the webhook as soon as it is available.  With webhooks, the web starts to become more aware of events in real time.  For many applications and their users, this is highly desirable.  Nobody wants to wait 5 minutes before realizing they just received an important response to an email.
                                        </p>
                                    </ol>
                                </p>
                                <p>
                                    <b>
                                        Mandrill Webhook at Headhonchos.com
                                    </b>
                                </p>
                                <p>
                                    Building a mailing server is never an easy task, and when you volume is too high it becomes more difficult. Every day lots of junk emails lands in our database and some times email server start stop receiving your emails due to security reasons. Which causes situations like rejection, hard bounce and sometimes marking your email as spam. Which affects the ranking of your domain. 
                                </p>
                                <p>
                                    So there are two solutions, one is conventional technique of using APIs and fetching data from third party applications and thus increasing there overhead or we can use webhooks which will automatically trigger an action which can help our bandwidth and CPU cycle, which is more costly now a days.
                                </p>
                                <p>
                                    Below is a case study, which will show you how webhooks helps us reducing our cost and hence helps in better delivery of emails.
                                </p>
                                <p>
                                    <b>Scenario: -</b>
                                </p>
                                <p>
                                    A recruiter is just registered at headhonchos.com and he register with an email address and now his organization has changed policy on incoming emails, when we try to send emails to such users our mail server will receive a hard bounce, which if increases then mail server like Google can mark our domain as spam which can cause landing of our emails to either in spam folder or skipping primary tab.
                                </p>
                                <p>
                                    <b>
                                        CASE 1: Using API’s
                                    </b>
                                </p>
                                <p>
                                    We received an hard bounce and we didn’t knew it till our API hit their system and in between a marketing email is send to such users, which will cause another hard bounce.
                                </p>
                                <p>
                                    We cant stop hard bounce till our API tell us, and sometime rate limit of API causes this problem.
                                </p>
                                <p>
                                    <b>
                                        CASE 2: Webhooks,
                                    </b>
                                </p>
                                <p>
                                    When using webhooks, First time when the email is bounced back, mandrill will inform us that incidence and our system will mark these emails and will not send them emails, which in result decrease our cost by eliminating such emails and also maintain our domain ranking.
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="six wide column">
                        <div class="column">
                            <div class="ui raised segment">
                                <div class="ui teal ribbon label">Description</div>
                                <p>Why Webhooks??</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="ui horizontal icon divider">
                <i class="circular heart icon outline"></i>
            </div>

            <h2 class="ui dividing header">createId()</h2>
            <div class="example">
                <div class="ui grid">
                    <div class="ten wide column">
                        <div class="ui small piled feed segment">
                            <h4 class="ui header">Code</h4>
                            <div class="ui inverted segment">
<pre>
<code>
&lt;?php
    function createId( $intOnly = true ) {
        $fixed = 1390000000;
        $t = explode( " ", microtime() );
        $uid = $t[1] - $fixed;
        return ( $intOnly ) ? $uid : uniqid();
    }
?&gt;
</code>
</pre>
                            </div>
                        </div>
                    </div>
                    <div class="six wide column">
                        <div class="column">
                            <div class="ui raised segment">
                                <div class="ui teal ribbon label">Description</div>
                                <p>This function will return random and unique id in integer.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="ui horizontal icon divider">
                <i class="circular heart icon outline"></i>
            </div>

            <h2 class="ui dividing header">getQuarter()</h2>
            <div class="example">
                <div class="ui grid">
                    <div class="ten wide column">
                        <div class="ui small piled feed segment">
                            <h4 class="ui header">Code</h4>
                            <div class="ui inverted segment">
<pre>
<code>
&lt;?php
    function getQuarter( $d1 = '2013-01-01',
            $d2 = '2015-01-05') {
        if( $d1 > $d2 ) {
            $temp = $d2;
            $d2 = $d1;
            $d1 = $temp;
        }
        $d1Q = ceil( date( "m", strtotime( $d1 ) ) / 3 );
        $d1Y = date( "Y", strtotime( $d1 ) );
        $d2Y = date( "Y", strtotime( $d2 ) );
        $d2Q = ceil( date( "m", strtotime( $d2 ) ) / 3 );
        $return = array();
        for( $d1Y; $d1Y &lt;= $d2Y;) {
            $return[] = $d1Y . 'Q' . $d1Q;
            if( $d1Y == $d2Y && $d1Q == $d2Q ) {
                return $return;
            } else {
                if( $d1Q == 4 ) {
                    $d1Y++;
                    $d1Q = 1;
                }
                else $d1Q++;
            }
        }
    }
?&gt;
</code>
</pre>
                            </div>
                        </div>
                    </div>
                    <div class="six wide column">
                        <div class="column">
                            <div class="ui raised segment">
                                <div class="ui teal ribbon label">Description</div>
                                <p>This function is used to return quarters between two dates</p>
                                <p>Dates can be passed in any format, and in any order.</p>
                                <div class="ui purple ribbon label">Demo</div>
                                <div class="ui animated list">
                                    <div class="item">
                                        <div class="content">
                                            <div class="header">getQuarter("2013-01-01", "2013-01-02")</div>
                                            This will return 2013Q1
                                         </div>
                                    </div>
                                    <div class="item">
                                        <div class="content">
                                            <div class="header">getQuarter("2013-01-01", "2013-04-02")</div>
                                            This will return 2013Q1, 2013Q2
                                         </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="ui horizontal icon divider">
                <i class="circular heart icon outline"></i>
            </div>

            <h2 class="ui dividing header">quarter()</h2>
            <div class="example">
                <div class="ui grid">
                    <div class="ten wide column">
                        <div class="ui small piled feed segment">
                            <h4 class="ui header">Code</h4>
                            <div class="ui inverted segment">
<pre>
<code>
&lt;?php
    function quarter( $quarter = '', $calculate = 0,
            $all = false ) {
        $quarter = explode( 'Q', $quarter );
        $year = $quarter[0];
        $month = ($quarter[1]*3) -2;
        $day = 1;
        $calculate = $calculate*3;
        $current = $day . '-' . $month . '-' . $year;
        $current = date( "Y-m-d", strtotime( $current  ) );
        $calculate = $calculate >= 0 ?  
            '+' . $calculate . ' month' 
            : $calculate . ' month';
        $date = date( "Y-m-d", 
            strtotime( $current . $calculate  ) );
        if( $all )
            return getQuarter( $current, $date );
        return getQuarter( $date, $date )[0];
    }
?&gt;
</code>
</pre>
                            </div>
                        </div>
                    </div>
                    <div class="six wide column">
                        <div class="column">
                            <div class="ui raised segment">
                                <div class="ui teal ribbon label">Description</div>
                                <p>This function will do calculations on a quarter.</p>
                                <p>To be used with getQuarter() function.</p>
                                <div class="ui purple ribbon label">Demo</div>
                                <div class="ui animated list">
                                    <div class="item">
                                        <div class="content">
                                            <div class="header">quarter("2014Q3", '+2', true)</div>
                                            This will find next 2 quarters and will output 2014Q4, 2015Q1
                                         </div>
                                    </div>
                                    <div class="item">
                                        <div class="content">
                                            <div class="header">quarter("2014Q3", '+2' )</div>
                                            This will add 2 quarter's to passed quarter, will output 2015Q1
                                         </div>
                                    </div>
                                    <div class="item">
                                        <div class="content">
                                            <div class="header">quarter("2014Q2", '-2' )</div>
                                            This will subtract 2 quarter's to passed quarter, will output 2013Q4
                                         </div>
                                    </div>
                                    <div class="item">
                                        <div class="content">
                                            <div class="header">quarter("2014Q2", '-2', true )</div>
                                            This will find previous 2 quarters and will output 2013Q4, 2014Q1
                                         </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="ui horizontal icon divider">
                <i class="circular heart icon outline"></i>
            </div>

            <h2 class="ui dividing header">quarterToDate()</h2>
            <div class="example">
                <div class="ui grid">
                    <div class="ten wide column">
                        <div class="ui small piled feed segment">
                            <h4 class="ui header">Code</h4>
                            <div class="ui inverted segment">
<pre>
<code>
&lt;?php
    function quarterToDate( $quarter = '' ) {
        $quarter = explode( 'Q', $quarter );
        $year = $quarter[0];
        $month = ($quarter[1]*3) -2;
        $day = 1;
        $current = $day . '-' . $month . '-' . $year;
        $current = date( "Y-m-d", strtotime( $current  ) );
        return $current;
    }
?&gt;
</code>
</pre>
                            </div>
                        </div>
                    </div>
                    <div class="six wide column">
                        <div class="column">
                            <div class="ui raised segment">
                                <div class="ui teal ribbon label">Description</div>
                                <p>This function will return starting date for particular quarter.</p>
                                <p>Pass quarter in format like 2014Q1 and it will output 01-01-2014</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="ui horizontal icon divider">
                <i class="circular heart icon outline"></i>
            </div>

            <h2 class="ui dividing header">gettypeFromstring()</h2>
            <div class="example">
                <div class="ui grid">
                    <div class="ten wide column">
                        <div class="ui small piled feed segment">
                            <h4 class="ui header">Code</h4>
                            <div class="ui inverted segment">
<pre>
<code>
&lt;?php
    function gettypeFromstring( $string ){
        return gettype( getcorrectvariable( $string ) );
    }

    function getcorrectvariable($string){
        $string=trim( $string );
        if( empty( $string ) ) return "";
        if( !preg_match("/[^0-9.]+/",$string ) ) {
            if( preg_match("/[.]+/",$string ) ) {
                return (double)$string;
            } else {
                return (int)$string;
            }
        }
        if( $string=="true" ) return true;
        if( $string=="false" ) return false;
        return (string)$string;
    }
?&gt;
</code>
</pre>
                            </div>
                        </div>
                    </div>
                    <div class="six wide column">
                        <div class="column">
                            <div class="ui raised segment">
                                <div class="ui teal ribbon label">Description</div>
                                <p>This function will return type of string.</p>
                                <p>will output string, integer, double, boolean.</p>
                                <div class="ui purple ribbon label">Output</div>
                                <div class="ui animated list">
                                    <div class="item">
                                        <div class="content">
                                            <div class="header">gettypeFromstring("ABCD")</div>
                                            This will return string
                                         </div>
                                    </div>
                                    <div class="item">
                                        <div class="content">
                                            <div class="header">gettypeFromstring("ABCD123")</div>
                                            This will return string
                                         </div>
                                    </div>
                                    <div class="item">
                                        <div class="content">
                                            <div class="header">gettypeFromstring("123")</div>
                                            This will return integer
                                         </div>
                                    </div>
                                    <div class="item">
                                        <div class="content">
                                            <div class="header">gettypeFromstring("123 456")</div>
                                            This will return string
                                         </div>
                                    </div>
                                    <div class="item">
                                        <div class="content">
                                            <div class="header">gettypeFromstring("12.45")</div>
                                            This will return double
                                         </div>
                                    </div>
                                    <div class="item">
                                        <div class="content">
                                            <div class="header">gettypeFromstring("true")</div>
                                            This will return boolean
                                         </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="ui horizontal icon divider">
                <i class="circular heart icon outline"></i>
            </div>

            <h2 class="ui dividing header">dump()</h2>
            <div class="example">
                <div class="ui grid">
                    <div class="ten wide column">
                        <div class="ui small piled feed segment">
                            <h4 class="ui header">Code</h4>
                            <div class="ui inverted segment">
<pre>
<code>
&lt;?php
    function dump( $var ) {
        echo '&lt;pre&gt;';
        if( is_object( $var ) || is_array( $var ) ) {
            print_r( $var );
        } else {
            echo $var;
        }
        echo '&lt;/pre&gt;';
    }
?&gt;
</code>
</pre>
                            </div>
                        </div>
                    </div>
                    <div class="six wide column">
                        <div class="column">
                            <div class="ui raised segment">
                                <div class="ui teal ribbon label">Description</div>
                                <p>
                                    This Function is similar to print_r() function but it prints ther variable in readable format.
                                </p>
                                <p>
                                    Variable are print within pre tags, and makes reading easy.
                                </p>
                                <p>
                                    This Function will output both object or an array
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="ui horizontal icon divider">
            <i class="circular heart icon outline"></i>
        </div>
    </body>
</html>
